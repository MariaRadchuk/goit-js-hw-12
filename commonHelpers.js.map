{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.input-name');\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nlet totalHits = 0;\nlet page = 1;\n\nconst api = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '42310325-d8e2b88bd4f4d7db9639050a5',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n  },\n});\n\nconst galleryLightbox = new SimpleLightbox('.image-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nasync function getPhoto(event) {\n  event.preventDefault();\n\n  const searchQuery = searchInput.value.trim();\n\n  if (!searchQuery) {\n    showErrorToast('Please enter a search query');\n    return;\n  }\n\n  try {\n    loader.classList.add('visible');\n    const response = await api.get('', { params: { q: searchQuery } });\n    const data = response.data;\n    totalHits = data.totalHits;\n    renderPhotos(data.hits);\n  } catch (error) {\n    console.error('Error fetching data:', error);\n    showErrorToast('Error fetching data. Please try again later.');\n  } finally {\n    loader.classList.remove('visible');\n  }\n}\n\nfunction renderPhotos(photos) {\n  if (photos.length === 0) {\n    showErrorToast('Sorry, there are no images matching your search query. Please try again!');\n    return;\n  }\n\n  gallery.innerHTML = photos.map(makeMarkup).join('');\n  galleryLightbox.refresh();\n  showLoadBtn();\n}\n\nfunction makeMarkup(photo) {\n  const {\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = photo;\n\n  return `\n    <li class=\"photo\">\n      <div class=\"photo-card\">\n        <a class=\"image-link\" data-lightbox=\"image\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" data-source=\"${largeImageURL}\" src=\"${webformatURL}\" alt=\"${tags}\">\n        </a>\n      </div>\n      <div class=\"description\">\n        <p class=\"description-item\"> Likes ${likes}</p>\n        <p class=\"description-item\"> Views ${views}</p>\n        <p class=\"description-item\"> Comments ${comments}</p>\n        <p class=\"description-item\"> Downloads ${downloads}</p>\n      </div>\n    </li>`;\n}\n\nasync function onLoadMoreClick() {\n  try {\n    loader.classList.add('visible');\n    const response = await api.get('', { params: { q: searchInput.value.trim(), page: ++page } });\n    renderPhotos(response.data.hits);\n    smoothScrollToNextGallery();\n  } catch (error) {\n    console.error('Error fetching data:', error);\n  } finally {\n    loader.classList.remove('visible');\n  }\n  \n  isLoadMore();\n}\n\nfunction showErrorToast(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    backgroundColor: 'red',\n    messageColor: 'white',\n    messageSize: '25',\n  });\n}\n\nfunction smoothScrollToNextGallery() {\n  const galleryItemHeight = document.querySelector('.photo').getBoundingClientRect().height;\n  window.scrollBy({ top: galleryItemHeight * 2, behavior: 'smooth' });\n}\n\nfunction showLoadBtn() {\n  loadBtn.style.visibility = 'visible';\n}\n\nfunction hideLoadBtn() {\n  loadBtn.style.visibility = 'hidden';\n}\n\nfunction isLoadMore() {\n  if (totalHits <= page * 15) {\n    hideLoadBtn();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      backgroundColor: '#125487',\n      messageColor: 'white',\n      messageSize: '25',\n    });\n  }\n}\n\nform.addEventListener('submit', getPhoto);\nloadBtn.addEventListener('click', onLoadMoreClick);\n"],"names":["form","searchInput","loader","gallery","loadBtn","totalHits","page","api","axios","galleryLightbox","SimpleLightbox","getPhoto","event","searchQuery","showErrorToast","data","renderPhotos","error","photos","makeMarkup","showLoadBtn","photo","webformatURL","largeImageURL","tags","likes","views","comments","downloads","onLoadMoreClick","response","smoothScrollToNextGallery","isLoadMore","message","iziToast","galleryItemHeight","hideLoadBtn"],"mappings":"owBAOA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAIC,EAAY,EACZC,EAAO,EAEX,MAAMC,EAAMC,EAAM,OAAO,CACvB,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACX,CACH,CAAC,EAEKC,EAAkB,IAAIC,EAAe,cAAe,CACxD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,eAAeC,EAASC,EAAO,CAC7BA,EAAM,eAAc,EAEpB,MAAMC,EAAcZ,EAAY,MAAM,KAAI,EAE1C,GAAI,CAACY,EAAa,CAChBC,EAAe,6BAA6B,EAC5C,MACD,CAED,GAAI,CACFZ,EAAO,UAAU,IAAI,SAAS,EAE9B,MAAMa,GADW,MAAMR,EAAI,IAAI,GAAI,CAAE,OAAQ,CAAE,EAAGM,CAAa,CAAA,CAAE,GAC3C,KACtBR,EAAYU,EAAK,UACjBC,EAAaD,EAAK,IAAI,CACvB,OAAQE,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CH,EAAe,8CAA8C,CACjE,QAAY,CACRZ,EAAO,UAAU,OAAO,SAAS,CAClC,CACH,CAEA,SAASc,EAAaE,EAAQ,CAC5B,GAAIA,EAAO,SAAW,EAAG,CACvBJ,EAAe,0EAA0E,EACzF,MACD,CAEDX,EAAQ,UAAYe,EAAO,IAAIC,CAAU,EAAE,KAAK,EAAE,EAClDV,EAAgB,QAAO,EACvBW,GACF,CAEA,SAASD,EAAWE,EAAO,CACzB,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA;AAAA;AAAA,4DAGmDE,CAAa;AAAA,oDACrBA,CAAa,UAAUD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,6CAIxDC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA,UAG1D,CAEA,eAAeC,GAAkB,CAC/B,GAAI,CACF3B,EAAO,UAAU,IAAI,SAAS,EAC9B,MAAM4B,EAAW,MAAMvB,EAAI,IAAI,GAAI,CAAE,OAAQ,CAAE,EAAGN,EAAY,MAAM,KAAM,EAAE,KAAM,EAAEK,CAAM,CAAA,CAAE,EAC5FU,EAAac,EAAS,KAAK,IAAI,EAC/BC,GACD,OAAQd,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CAC/C,QAAY,CACRf,EAAO,UAAU,OAAO,SAAS,CAClC,CAED8B,GACF,CAEA,SAASlB,EAAemB,EAAS,CAC/BC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EACT,gBAAiB,MACjB,aAAc,QACd,YAAa,IACjB,CAAG,CACH,CAEA,SAASF,GAA4B,CACnC,MAAMI,EAAoB,SAAS,cAAc,QAAQ,EAAE,sBAAuB,EAAC,OACnF,OAAO,SAAS,CAAE,IAAKA,EAAoB,EAAG,SAAU,QAAQ,CAAE,CACpE,CAEA,SAASf,GAAc,CACrBhB,EAAQ,MAAM,WAAa,SAC7B,CAEA,SAASgC,GAAc,CACrBhC,EAAQ,MAAM,WAAa,QAC7B,CAEA,SAAS4B,GAAa,CAChB3B,GAAaC,EAAO,KACtB8B,IACAF,EAAS,KAAK,CACZ,QAAS,6DACT,gBAAiB,UACjB,aAAc,QACd,YAAa,IACnB,CAAK,EAEL,CAEAlC,EAAK,iBAAiB,SAAUW,CAAQ,EACxCP,EAAQ,iBAAiB,QAASyB,CAAe"}